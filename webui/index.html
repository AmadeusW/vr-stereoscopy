<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Stereoscopy</title>
    <meta name="description" content="Watch stereoscopic images in your VR headset">
    <script src="lib/aframe.min.js"></script>
    <script src="lib/aframe-stereo-component.js"></script>
    <script src="lib/aframe-animation-component.min.js"></script>
    <script src="lib/aframe-listener.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <!-- <img id="sampleAsset" src="ui/img.png" /> -->
      </a-assets>

      <a-camera id="camera" position="0 0 0" stereocam="eye:left;" wasd-controls="enabled: false">
        <a-cursor fuse="true" id="cursor" color="yellow" fuseTimeout="700" raycaster="objects: .ui"> <!-- todo: see why FAR nor OBJECTS don't work -->
          <a-animation begin="click" easing="ease-bounce" attribute="scale"
             to="1 1 1" dur="200"></a-animation>
          <a-animation begin="mouseleave" easing="ease-out" attribute="scale"
             to="1 1 1" dur="300"></a-animation>
          <a-animation begin="fusing" easing="ease-in" attribute="scale"
             to="0.1 0.1 0.1" dur="700"></a-animation>
        </a-cursor> <!-- TODO: Use cursor only when no controllers found -->

        <!-- Stereo picture -->
        <a-entity id="mainPane" visible="false">
          <a-plane id="leftPlane"  position="0 0 -9" width="9" height="9" src="images/201705/6c9wxa.L.jpg" stereo="eye: right"></a-plane>
          <a-plane id="rightPlane" position="0 0 -9" width="9" height="9" src="images/201705/6c9wxa.R.jpg" stereo="eye: left"></a-plane>
        </a-entity>

      </a-camera>
      <!-- Navigation in slideshow mode -->
      <a-entity id="scrollPane" position="0 1.7 -4.5">
        <a-plane id="menuBottomZone" class="ui" position="0 -15 0" rotation="-90 0 0" width="50" height="20" color="#99b" opacity="0.01"
          listener__click="event: click; callback: onShowMenu">
            <a-animation begin="mouseleave" easing="ease-out" attribute="opacity"
             to="0.01" dur="500"></a-animation>
            <a-animation begin="mouseenter" easing="ease-out" attribute="opacity"
             to="0.2" dur="500"></a-animation>
          </a-plane>
        <a-plane id="menuTopZone" class="ui" position="0 15 0" rotation="90 0 0" width="50" height="20" color="#99b" opacity="0.01"
          listener__click="event: click; callback: onShowMenu">
        <a-animation begin="mouseleave" easing="ease-in" attribute="opacity"
          to="0.01" dur="500"></a-animation>
        <a-animation begin="mouseenter" easing="ease-in" attribute="opacity"
          to="0.2" dur="500"></a-animation>
        </a-plane>
        <a-plane id="scrollRThumbZone" class="ui" color="#99b" opacity="0.01" 
          position="5 0 4" width="10" height="20" rotation="0 -90 0"
          listener__click="event: click; callback: onNavigate; params: r"
          listener__enter="event: mouseenter; callback: onSelect; params: scrollRThumb"
          listener__leave="event: mouseleave; callback: onDeselect; params: scrollRThumb"
          >
          <a-animation begin="mouseleave" easing="ease-out" attribute="opacity"
            to="0.01" dur="500"></a-animation>
          <a-animation begin="mouseenter" easing="ease-out" attribute="opacity"
            to="0.2" dur="500"></a-animation>
        </a-plane>
        <a-entity id="scrollRThumb" position="6 0 0" rotation="0 -45 0">
          <a-animation begin="grow" easing="ease-out" attribute="scale"
            fill="forwards" to="2 2 2" dur="200"></a-animation>
          <a-animation begin="shrink" easing="ease-out" attribute="scale"
            fill="forwards" to="1 1 1" dur="300"></a-animation>
          <a-plane id="scrollRThumbL" class="ui" width="1" height="1" src="images/201705/6c9wxa.T.L.jpg" stereo="eye: right"></a-plane>
          <a-plane id="scrollRThumbR" class="ui" width="1" height="1" src="images/201705/6c9wxa.T.R.jpg" stereo="eye: left"></a-plane>
        </a-entity>
        <a-plane id="scrollLThumbZone" class="ui" color="#99b" opacity="0.01"
          position="-5 0 4" width="10" height="20" rotation="0 90 0"
          listener__click="event: click; callback: onNavigate; params: l"
          listener__enter="event: mouseenter; callback: onSelect; params: scrollLThumb"
          listener__leave="event: mouseleave; callback: onDeselect; params: scrollLThumb"
        >
          <a-animation begin="mouseleave" easing="ease-out" attribute="opacity"
            to="0.01" dur="500"></a-animation>
          <a-animation begin="mouseenter" easing="ease-out" attribute="opacity"
            to="0.2" dur="500"></a-animation>
        </a-plane>
        <a-entity id="scrollLThumb" position="-6 0 0" rotation="0 45 0">
          <a-animation begin="grow" easing="ease-out" attribute="scale"
            fill="forwards" to="2 2 2" dur="200"></a-animation>
          <a-animation begin="shrink" easing="ease-out" attribute="scale"
            fill="forwards" to="1 1 1" dur="300"></a-animation>
          <a-plane id="scrollLThumbL" class="ui" width="1" height="1" src="images/201705/6c9wxa.T.L.jpg" stereo="eye: right"></a-plane>
          <a-plane id="scrollLThumbR" class="ui" width="1" height="1" src="images/201705/6c9wxa.T.R.jpg" stereo="eye: left"></a-plane>
        </a-entity>
      </a-entity>

      <!-- Menu -->
      <a-entity id="menuPane" visible="false" position="0 2 -3">
        <a-text id="imageTitle" position="-3 -3 0" color="white" value="."></a-text>

        <a-animation begin="hide" delay="300"
          attribute="visible" to="false"></a-animation>
        <a-animation begin="hide" dur="300" easing="ease-in"
          attribute="position" from="0 2 -3" to="0 2 -4"></a-animation>
        <a-animation begin="show" delay="0"
          attribute="visible" to="true"></a-animation>
        <a-animation begin="show" dur="300" easing="ease-out"
          attribute="position" from="0 2 -4" to="0 2 -3"></a-animation>

        <a-plane width="20" height="20" position="0 0 -0.1" color="#000" opacity="0.7" id="menuCurtain">
          <a-animation begin="show" dur="300"
            attribute="material.opacity" from="0.0" to="0.7"></a-animation>
          <a-animation begin="hide" dur="300"
            attribute="material.opacity" from="0.7" to="0.0"></a-animation>
        </a-plane>

        <a-text id="menuTitle" position="-1.5 1 0" value="Gallery of stereoscopic images">
        </a-text>

        <a-cylinder id="timerButton" class="ui" position="-2.5 -2.2 0" rotation="90 0 0" color="#99b" scale=".3 .1 .3"
          listener__click="event: click; callback: onToggleTimer;"
        >
          <a-animation begin="mouseleave" easing="ease-out" attribute="scale"
            to=".3 .1 .3" dur="500"></a-animation>
          <a-animation begin="mouseenter" easing="ease-out" attribute="scale"
            to="0.4 0.1 0.4" dur="500"></a-animation>
        </a-cylinder>

        <a-entity id="categoryTemplate" class="ui" visible="false">
          <a-entity class="categoryThumb" class="ui" scale="1 1 1"
            listener__click="event: click; callback: onConfirm; params: -1, -1"
            listener__enter="event: mouseenter; callback: onSelect"
            listener__leave="event: mouseleave; callback: onDeselect"
            >
            <a-plane class="thumbL" class="ui" position="0 -0.3 0" src="images/201705/6c9wxa.T.L.jpg" stereo="eye: right"></a-plane>
            <a-plane class="thumbR" class="ui" position="0 -0.3 0" src="images/201705/6c9wxa.T.R.jpg" stereo="eye: left"></a-plane>
            <a-animation begin="grow" easing="ease-out" attribute="scale"
              fill="forwards" to="1.2 1.2 1.2" dur="200"></a-animation>
            <a-animation begin="shrink" easing="ease-out" attribute="scale"
              fill="forwards" to="1 1 1" dur="300"></a-animation>
          </a-entity>
          <a-text class="title" position="-0.3 0.4 0" scale="0.5 0.5 0.5" color="white" value="Sample category"></a-text>
        </a-entity>
      </a-entity>
        
      <a-sky color="#000"></a-sky>
      <a-light type="ambient"></a-light>
    </a-scene>
  </body>
  <script src="connectivity.js"></script>
  <script src="menu.js"></script>
  <script src="control.js"></script>
</html>
