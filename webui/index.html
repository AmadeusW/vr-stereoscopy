<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Stereoscopy</title>
    <meta name="description" content="Watch stereoscopic images in your VR headset">
    <script src="lib/aframe.min.js"></script>
    <script src="lib/aframe-stereo-component.js"></script>
    <script src="lib/aframe-animation-component.min.js"></script>
    <script src="lib/aframe-listener.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <!-- <img id="sampleAsset" src="ui/img.png" /> -->
      </a-assets>

      <a-camera id="camera" position="0 0 0" stereocam="eye:left;" wasd-controls="enabled: false">
        <a-cursor fuse="true" color="yellow" fuseTimeout="1000" raycaster="objects: .ui"> <!-- todo: see why FAR nor OBJECTS don't work -->
          <a-animation begin="click" easing="ease-in" attribute="scale"
             fill="backwards" to="1 1 1" dur="100"></a-animation>
          <a-animation begin="mouseleave" easing="ease-out" attribute="scale"
             fill="backwards" to="1 1 1" dur="300"></a-animation>
          <a-animation begin="fusing" easing="ease-in" attribute="scale"
             fill="forwards" to="0.1 0.1 0.1" dur="1000"></a-animation>
        </a-cursor> <!-- TODO: Use cursor only when no controllers found -->

        <!-- Stereo picture -->
        <a-entity id="mainPane">
          <a-plane id="leftPlane"  position="0 0 -4" width="9" height="9" src="images/5w2nrt.L.jpg" stereo="eye: right"></a-plane>
          <a-plane id="rightPlane" position="0 0 -4" width="9" height="9" src="images/5w2nrt.R.jpg" stereo="eye: left"></a-plane>
        </a-entity>

      </a-camera>
<!-- TODO: use these
https://github.com/ngokevin/kframe/blob/master/components/animation/examples/events/index.html
https://github.com/ngokevin/kframe/tree/master/components/animation/ -->
      <!-- Navigation in slideshow mode -->
      <a-entity id="scrollPane" position="0 1.7 -5">
        <a-entity id="scrollRThumb" class="ui" position="6 0 0" rotation="0 -45 0">
          <a-plane id="scrollRThumbL" class="ui" width="1" height="1" src="images/5w2nrt.T.L.jpg" stereo="eye: right"></a-plane>
          <a-plane id="scrollRThumbR" class="ui" width="1" height="1" src="images/5w2nrt.T.R.jpg" stereo="eye: left"></a-plane>
        </a-entity>
        <a-entity id="scrollLThumb" class="ui" position="-6 0 0" rotation="0 45 0">
          <a-plane id="scrollLThumbL" class="ui" width="1" height="1" src="images/5w2nrt.T.L.jpg" stereo="eye: right"></a-plane>
          <a-plane id="scrollLThumbR" class="ui" width="1" height="1" src="images/5w2nrt.T.R.jpg" stereo="eye: left"></a-plane>
        </a-entity>
      </a-entity>

      <!-- Menu -->
      <a-entity id="menuPane" visible="false" position="0 2 -3">
        <a-text id="menuTitle" position="0 1 0" value="Stereoscopy in VR">
            <a-animation delay="5000" easing="ease-in" attribute="position"
            fill="forwards" to="0 5 0" dur="3000"></a-animation>
            <a-animation delay="6000" easing="ease-in" attribute="rotation"
              fill="forwards" to="45 0 0" dur="2000"></a-animation>
        </a-text>
        <a-entity id="categoryTemplate" class="ui" visible="false">
          <a-entity class="categoryThumb" class="ui" scale=".5 .5 0"
            listener__click="event: click; callback: select; params: [1, 2, 3]" 
            listener__enter="event: mouseenter; callback: select; params: [1, 2, 3]" 
            listener__leave="event: mouseleave; callback: deselect; params: [1, 2, 3]" 
            >
            <a-plane class="thumbL" class="ui" position="0 -0.8 0" src="images/5w2nrt.T.L.jpg" stereo="eye: right"></a-plane>
            <a-plane class="thumbR" class="ui" position="0 -0.8 0" src="images/5w2nrt.T.R.jpg" stereo="eye: left"></a-plane>
            <a-animation begin="grow" easing="ease-out" attribute="scale"
              fill="forwards" to=".8 .8 .8" dur="200"></a-animation>
            <a-animation begin="shrink" easing="ease-out" attribute="scale"
              fill="forwards" to=".5 .5 .5" dur="300"></a-animation>
          </a-entity>
          <a-text class="title" position="0 0.2 0" scale="0.3 0.3 0.3" color="red" value="Sample category"></a-text>
        </a-entity>
      </a-entity>
        
      <a-sky color="#000"></a-sky>
      <a-light type="ambient"></a-light>
    </a-scene>
  </body>
  <script src="connectivity.js"></script>
  <script src="menu.js"></script>
  <script src="control.js"></script>
</html>
